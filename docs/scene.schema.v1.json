{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/George-RD/rive-rs-cli/docs/scene.schema.v1.json",
  "title": "rive-cli SceneSpec v1",
  "type": "object",
  "required": ["scene_format_version"],
  "oneOf": [
    {
      "required": ["artboard"],
      "properties": {
        "scene_format_version": { "type": "integer", "const": 1 },
        "artboard": { "$ref": "#/$defs/artboard" }
      },
      "unevaluatedProperties": false
    },
    {
      "required": ["artboards"],
      "properties": {
        "scene_format_version": { "type": "integer", "const": 1 },
        "artboards": {
          "type": "array",
          "items": { "$ref": "#/$defs/artboard" },
          "minItems": 1
        }
      },
      "unevaluatedProperties": false
    }
  ],
  "$defs": {
    "artboard": {
      "type": "object",
      "required": ["name", "children"],
      "anyOf": [
        { "required": ["preset"] },
        { "required": ["width", "height"] }
      ],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "preset": {
          "type": "string",
          "enum": ["mobile", "tablet", "desktop", "square", "banner", "story"]
        },
        "width": { "type": "number", "minimum": 0 },
        "height": { "type": "number", "minimum": 0 },
        "children": {
          "type": "array",
          "items": { "$ref": "#/$defs/object" }
        },
        "animations": {
          "type": "array",
          "items": { "$ref": "#/$defs/animation" }
        },
        "state_machines": {
          "type": "array",
          "items": { "$ref": "#/$defs/state_machine" }
        }
      },
      "unevaluatedProperties": false
    },
    "object": {
      "oneOf": [
        { "$ref": "#/$defs/shape" },
        { "$ref": "#/$defs/ellipse" },
        { "$ref": "#/$defs/rectangle" },
        { "$ref": "#/$defs/fill" },
        { "$ref": "#/$defs/stroke" },
        { "$ref": "#/$defs/solid_color" },
        { "$ref": "#/$defs/linear_gradient" },
        { "$ref": "#/$defs/radial_gradient" },
        { "$ref": "#/$defs/gradient_stop" },
        { "$ref": "#/$defs/node" },
        { "$ref": "#/$defs/path" },
        { "$ref": "#/$defs/trim_path" },
        { "$ref": "#/$defs/nested_artboard" }
      ],
      "unevaluatedProperties": false
    },
    "base_object": {
      "type": "object",
      "required": ["type", "name"],
      "properties": {
        "type": { "type": "string" },
        "name": { "type": "string", "minLength": 1 }
      }
    },
    "shape": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "shape" },
            "x": { "type": "number" },
            "y": { "type": "number" },
            "children": { "type": "array", "items": { "$ref": "#/$defs/object" } }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "ellipse": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "required": ["width", "height"],
          "properties": {
            "type": { "const": "ellipse" },
            "width": { "type": "number", "minimum": 0 },
            "height": { "type": "number", "minimum": 0 },
            "origin_x": { "type": "number" },
            "origin_y": { "type": "number" }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "rectangle": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "required": ["width", "height"],
          "properties": {
            "type": { "const": "rectangle" },
            "width": { "type": "number", "minimum": 0 },
            "height": { "type": "number", "minimum": 0 },
            "corner_radius": { "type": "number", "minimum": 0 },
            "origin_x": { "type": "number" },
            "origin_y": { "type": "number" }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "fill": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "fill" },
            "fill_rule": { "type": "integer", "minimum": 0 },
            "children": { "type": "array", "items": { "$ref": "#/$defs/object" } }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "stroke": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "stroke" },
            "thickness": { "type": "number", "minimum": 0 },
            "cap": { "type": "integer", "minimum": 0 },
            "join": { "type": "integer", "minimum": 0 },
            "children": { "type": "array", "items": { "$ref": "#/$defs/object" } }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "solid_color": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "required": ["color"],
          "properties": {
            "type": { "const": "solid_color" },
            "color": { "type": "string", "pattern": "^#?[0-9A-Fa-f]{6}([0-9A-Fa-f]{2})?$" }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "linear_gradient": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "required": ["start_x", "start_y", "end_x", "end_y"],
          "properties": {
            "type": { "const": "linear_gradient" },
            "start_x": { "type": "number" },
            "start_y": { "type": "number" },
            "end_x": { "type": "number" },
            "end_y": { "type": "number" },
            "children": { "type": "array", "items": { "$ref": "#/$defs/object" } }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "radial_gradient": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "required": ["start_x", "start_y", "end_x", "end_y"],
          "properties": {
            "type": { "const": "radial_gradient" },
            "start_x": { "type": "number" },
            "start_y": { "type": "number" },
            "end_x": { "type": "number" },
            "end_y": { "type": "number" },
            "children": { "type": "array", "items": { "$ref": "#/$defs/object" } }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "gradient_stop": {
      "type": "object",
      "required": ["type", "color", "position"],
      "properties": {
        "type": { "const": "gradient_stop" },
        "name": { "type": "string", "minLength": 1 },
        "color": { "type": "string", "pattern": "^#?[0-9A-Fa-f]{6}([0-9A-Fa-f]{2})?$" },
        "position": { "type": "number", "minimum": 0, "maximum": 1 }
      },
      "unevaluatedProperties": false
    },
    "node": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "node" },
            "x": { "type": "number" },
            "y": { "type": "number" }
          },
          "unevaluatedProperties": false
        }
      ],
      "unevaluatedProperties": false
    },
    "path": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "path" },
            "path_flags": { "type": "integer", "minimum": 0 }
          },
          "unevaluatedProperties": false
        }
      ],
      "unevaluatedProperties": false
    },
    "trim_path": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "trim_path" },
            "start": { "type": "number", "minimum": 0 },
            "end": { "type": "number", "minimum": 0 },
            "offset": { "type": "number" },
            "mode": { "type": "integer", "enum": [1, 2] }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "nested_artboard": {
      "allOf": [
        { "$ref": "#/$defs/base_object" },
        {
          "type": "object",
          "required": ["source_artboard"],
          "properties": {
            "type": { "const": "nested_artboard" },
            "source_artboard": { "type": "string", "minLength": 1 },
            "x": { "type": "number" },
            "y": { "type": "number" }
          }
        }
      ],
      "unevaluatedProperties": false
    },
    "animation": {
      "type": "object",
      "required": ["name", "fps", "duration", "keyframes"],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "fps": { "type": "integer", "minimum": 1 },
        "duration": { "type": "integer", "minimum": 1 },
        "speed": { "type": "number" },
        "loop_type": { "type": "integer", "minimum": 0 },
        "interpolators": {
          "type": "array",
          "items": { "$ref": "#/$defs/interpolator" }
        },
        "keyframes": {
          "type": "array",
          "items": { "$ref": "#/$defs/keyframe_group" }
        }
      },
      "unevaluatedProperties": false
    },
    "interpolator": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "x1": { "type": "number", "minimum": 0, "maximum": 1 },
        "y1": { "type": "number" },
        "x2": { "type": "number", "minimum": 0, "maximum": 1 },
        "y2": { "type": "number" }
      },
      "unevaluatedProperties": false
    },
    "keyframe_group": {
      "type": "object",
      "required": ["object", "property", "frames"],
      "properties": {
        "object": { "type": "string", "minLength": 1 },
        "property": {
          "type": "string",
          "enum": ["x", "y", "rotation", "scale_x", "scale_y", "opacity", "width", "height", "color", "trim_start", "trim_end", "trim_offset"]
        },
        "frames": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["frame", "value"],
            "properties": {
              "frame": { "type": "integer", "minimum": 0 },
              "value": {},
              "interpolation": { "type": "string", "enum": ["hold", "linear", "cubic"] },
              "interpolator": { "type": "string", "minLength": 1 }
            },
            "unevaluatedProperties": false
          }
        }
      },
      "unevaluatedProperties": false
    },
    "state_machine": {
      "type": "object",
      "required": ["name", "layers"],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "inputs": { "type": "array", "items": { "$ref": "#/$defs/input" } },
        "layers": { "type": "array", "items": { "$ref": "#/$defs/layer" } }
      },
      "unevaluatedProperties": false
    },
    "input": {
      "oneOf": [
        {
          "type": "object",
          "required": ["type", "name", "value"],
          "properties": {
            "type": { "const": "number" },
            "name": { "type": "string", "minLength": 1 },
            "value": { "type": "number" }
          },
          "unevaluatedProperties": false
        },
        {
          "type": "object",
          "required": ["type", "name", "value"],
          "properties": {
            "type": { "const": "bool" },
            "name": { "type": "string", "minLength": 1 },
            "value": { "type": "boolean" }
          },
          "unevaluatedProperties": false
        },
        {
          "type": "object",
          "required": ["type", "name"],
          "properties": {
            "type": { "const": "trigger" },
            "name": { "type": "string", "minLength": 1 }
          },
          "unevaluatedProperties": false
        }
      ],
      "unevaluatedProperties": false
    },
    "layer": {
      "type": "object",
      "required": ["states"],
      "properties": {
        "states": { "type": "array", "items": { "$ref": "#/$defs/state" } },
        "transitions": { "type": "array", "items": { "$ref": "#/$defs/transition" } }
      },
      "unevaluatedProperties": false
    },
    "state": {
      "oneOf": [
        {
          "type": "object",
          "required": ["type"],
          "properties": { "type": { "const": "entry" } },
          "unevaluatedProperties": false
        },
        {
          "type": "object",
          "required": ["type"],
          "properties": { "type": { "const": "exit" } },
          "unevaluatedProperties": false
        },
        {
          "type": "object",
          "required": ["type"],
          "properties": { "type": { "const": "any" } },
          "unevaluatedProperties": false
        },
        {
          "type": "object",
          "required": ["type", "animation"],
          "properties": {
            "type": { "const": "animation" },
            "animation": { "type": "string", "minLength": 1 }
          },
          "unevaluatedProperties": false
        }
      ],
      "unevaluatedProperties": false
    },
    "transition": {
      "type": "object",
      "required": ["from", "to"],
      "properties": {
        "from": { "type": "integer", "minimum": 0 },
        "to": { "type": "integer", "minimum": 0 },
        "duration": { "type": "integer", "minimum": 0 },
        "conditions": { "type": "array", "items": { "$ref": "#/$defs/condition" } }
      },
      "unevaluatedProperties": false
    },
    "condition": {
      "type": "object",
      "required": ["input"],
      "properties": {
        "input": { "type": "string", "minLength": 1 },
        "op": { "type": "string" },
        "value": {}
      },
      "unevaluatedProperties": false
    }
  }
}
